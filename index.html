<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capper WebUI</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/cap.svg">
    <link rel="alternate icon" href="/cap.svg" type="image/svg+xml">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Pickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/nano.min.css">
    <link href="styles.css" rel="stylesheet">
    <!-- Vue.js Production -->
    <script src="https://unpkg.com/vue@3.3.4/dist/vue.global.js"></script>
    <!-- Pyodide -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <!-- Pickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/pickr.min.js"></script>
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
</head>
<body class="py-4">
    <div id="app" class="container-fluid">
        <!-- Project Name Input -->
        <div class="row project-name-container">
            <div class="col-4">
                <div class="form-group">
                    <label class="form-label">Project Name</label>
                    <input type="text" class="form-control" v-model="projectName" placeholder="Enter project name">
                </div>
            </div>
        </div>

        <div class="row g-4">
            <div class="col-md-4">
                <h3 class="mb-3">Image Upload</h3>
                <div class="form-group">
                    <div class="image-preview" id="imagePreview">
                        <img v-if="imagePreview" :src="imagePreview" alt="Preview">
                        <span v-else>No image selected</span>
                    </div>
                    <input type="file" @change="handleImageUpload" accept="image/*" class="form-control">
                </div>
                
                <!-- Background Color Section -->
                <div class="bg-color-section">
                    <div class="form-group mb-0">
                        <label class="form-label">Background Color</label>
                        <div class="bg-color-container">
                            <div id="bgColorPicker" class="color-picker-container"></div>
                            <small class="text-muted">Click to choose color</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <h3 class="mb-3">Text Editor</h3>
                <div class="form-group">
                    <textarea v-model="textContent" class="form-control text-editor-tall" placeholder="Enter your text here..."></textarea>
                </div>
                
                <div class="text-controls">
                    <div class="row">
                        <!-- Position Dropdown -->
                        <div class="form-group col-6">
                            <label class="form-label">Text Position</label>
                            <select class="form-select" v-model="textPosition">
                                <option value="left">Left</option>
                                <option value="right">Right</option>
                                <option value="split">Split</option>
                            </select>
                        </div>

                        <!-- Alignment Dropdown -->
                        <div class="form-group col-6">
                            <label class="form-label">Text Alignment</label>
                            <select class="form-select" v-model="textAlignment">
                                <option value="left">Left</option>
                                <option value="right">Right</option>
                                <option value="center">Center</option>
                            </select>
                        </div>
                    </div>

                    <!-- Credits Section -->
                    <div class="form-group">
                        <div class="credits-section">
                            <label class="form-label">Credits</label>
                            <textarea v-model="credits" class="form-control credits-input" placeholder="Enter credits..."></textarea>
                            <select class="form-select" v-model="creditsPosition">
                                <option value="top-left">Top Left</option>
                                <option value="top-right">Top Right</option>
                                <option value="bottom-left">Bottom Left</option>
                                <option value="bottom-right">Bottom Right</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <character-list 
                    v-model:characters="characters"
                    :available-fonts="availableFonts"
                    @insert-tag="insertCharacterTag"
                    @font-upload="handleFontUpload">
                </character-list>
            </div>

            <div class="col-12 generate-button-container">
                <button @click="generate" class="btn btn-success">Generate</button>
            </div>
            <div class="col-12 output-container">
                <div class="bg-light p-3 rounded">{{ output }}</div>
            </div>
        </div>
    </div>
    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- App JS -->
    <script type="module" src="main.js"></script>
</body>
</html>
